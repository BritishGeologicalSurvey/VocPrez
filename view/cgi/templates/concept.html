{% extends "page.html" %}

<!-- Set list of predicates for display -->
{% set displayed_relationships = [
    'http://purl.org/dc/terms/created',
    'http://purl.org/dc/terms/modified',
    'http://www.w3.org/2004/02/skos/core#prefLabel',
    'http://www.w3.org/2004/02/skos/core#altLabel',
    'http://www.w3.org/2004/02/skos/core#definition',
    'http://www.w3.org/2000/01/rdf-schema#comment',
    'http://purl.org/dc/terms/source',
    'http://purl.org/dc/terms/contributor',
    'http://www.w3.org/2004/02/skos/core#exactMatch',
    'http://www.w3.org/2004/02/skos/core#closeMatch',
    'http://www.w3.org/2004/02/skos/core#broadMatch',
    'http://www.w3.org/2004/02/skos/core#narrowMatch',
    'http://www.w3.org/2004/02/skos/core#broader',
    'http://www.w3.org/2004/02/skos/core#broaderTransitive',
    'http://www.w3.org/2004/02/skos/core#narrower',
    'http://www.w3.org/2004/02/skos/core#narrowerTransitive',
    ]         
%}

{% block content %}
<h1>{{ concept.prefLabel }}</h1>
<h3>URI: <a href="{{ uri }}">{{ uri }}</a></h3>
<h3>Within vocab <a href="{{ url_for('routes.vocabulary', vocab_id=vocab_id) }}">{{ vocab_title }}</a></h3>
<table class="metadata concept">
    {% if concept.lang_prefLabels|length > 0 %}
    <tr>
        <th style="padding-right: 10px;">Other Language Labels</th>
        <td class="list">
            {% for lang, prefLabel in concept.lang_prefLabels.items() -%}
                {{ prefLabel }} ({{ lang }})<br>
            {% endfor %}
        </td>
    </tr>
    {% endif %}

    {% for relationship in displayed_relationships -%}
        {% if concept.related_objects[relationship] and concept.related_objects[relationship]['objects'] -%}
            <tr>
                <th style="padding-right: 10px;">{{concept.related_objects[relationship]['label']}}:</th>
                <td class="list">
                    {% for concept_uri, concept_label in concept.related_objects[relationship]['objects'].items() -%}
                    {%  if concept_uri and concept_label -%}
                    <a href="{{ request.base_url }}?vocab_id={{ vocab_id }}&uri={{ h.url_encode(concept_uri) }}">{{ concept_label }}</a><br>
                    {% else -%}
                    {{ concept_uri }}</a><br>
                    {% endif -%}
                    {% endfor -%}                    
                </td>
            </tr>
        {% endif -%}
    {% endfor -%}
    

    <!-- Display W3C time relationships for concept - required for CGI International Chronostratigraphic Chart -->
    {% for relationship in concept.related_objects.keys() -%}
        {% if relationship.startswith('http://www.w3.org/2006/time#') and concept.related_objects[relationship]['objects'] -%}
            <tr>
                <th style="padding-right: 10px;">{{concept.related_objects[relationship]['label']}}:</th>
                <td class="list">
                    {% for concept_uri, concept_label in concept.related_objects[relationship]['objects'].items() -%}
                    {%  if concept_uri and concept_label -%}
                    <a href="{{ request.base_url }}?vocab_id={{ vocab_id }}&uri={{ h.url_encode(concept_uri) }}">{{ concept_label }}</a><br>
                    {% else -%}
                    {{ concept_uri }}</a><br>
                    {% endif -%}
                    {% endfor -%}                    
                </td>
            </tr>
        {% endif -%}
    {% endfor -%}

</table>
<hr>
<h3>Alternate views</h3>
<p>Other model views of this Concept are listed in the <a href="{{ request.base_url }}?vocab_id={{ vocab_id }}&uri={{ h.url_encode(uri) }}&_view=alternates">Alternates View</a>.</p>
{% endblock %}
